<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘å¸ƒå¸–å­ - æ¸¸æˆç©å®¶å†…å®¹å‘å¸ƒå¹³å°</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/auth.js"></script>
    <script src="js/post.js"></script>
    <script src="js/init-mock-data.js"></script>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <h1><a href="index.html" style="text-decoration: none; color: #3a3a3a;">ğŸ® æ¸¸æˆç©å®¶å¹³å°</a></h1>
            </div>
            <div class="nav-links">
                <a href="index.html">ğŸ  é¦–é¡µ</a>
                <a href="#" id="posts-link">ğŸ“ å¸–å­</a>
                <a href="#" id="articles-link">ğŸ“„ æ–‡ç« </a>
                <a href="login.html" id="login-nav">ğŸ” ç™»å½•</a>
                <a href="register.html" id="register-nav">ğŸ“‹ æ³¨å†Œ</a>
                <div id="user-profile" style="display: flex; align-items: center; gap: 15px;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div style="width: 40px; height: 40px; border-radius: 50%; overflow: hidden; background: #e2e8f0; display: flex; align-items: center; justify-content: center; border: 2px solid #4a90e2;">
                            <img id="navbar-avatar" src="" alt="ç”¨æˆ·å¤´åƒ" style="width: 100%; height: 100%; object-fit: cover;">
                            <i class="fas fa-user" style="color: #4a90e2; font-size: 20px;"></i>
                        </div>
                        <span id="username-display" style="color: #1a1a1a; font-weight: 700; font-size: 16px;"></span>
                    </div>
                    <button id="logout-btn" style="background: #ff4757; color: #ffffff; border: 0; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600;">
                        é€€å‡ºç™»å½•
                    </button>
                </div>
                <a href="#" id="logout-nav" style="display: none;">ğŸšª é€€å‡º</a>
                <a href="create-post.html" class="active">ğŸ“ å‘å¸ƒå¸–å­</a>
            </div>
        </div>
    </nav>

    <!-- å‘å¸ƒå†…å®¹è¡¨å• -->
    <div class="form-container">
        <div class="form-card">
            <h2 class="form-title">ğŸ“ å‘å¸ƒæ–°å†…å®¹</h2>
            <form id="createPostForm">
                <div class="form-group">
                    <label for="content-type">å†…å®¹ç±»å‹</label>
                    <select id="content-type" required>
                        <option value="post">å¸–å­</option>
                        <option value="article">æ–‡ç« </option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="post-title">æ ‡é¢˜</label>
                    <input type="text" id="post-title" placeholder="è¯·è¾“å…¥å†…å®¹æ ‡é¢˜" required>
                </div>
                <div class="form-group">
                    <label for="post-category">åˆ†ç±»</label>
                    <select id="post-category" required>
                        <option value="">è¯·é€‰æ‹©åˆ†ç±»</option>
                        <option value="news">æ¸¸æˆèµ„è®¯</option>
                        <option value="guides">æ”»ç•¥æŠ€å·§</option>
                        <option value="discussion">è®¨è®ºäº¤æµ</option>
                        <option value="reviews">æ¸¸æˆè¯„æµ‹</option>
                        <option value="media">æˆªå›¾è§†é¢‘</option>
                        <option value="other">å…¶ä»–</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="post-content">å†…å®¹</label>
                    <textarea id="post-content" rows="10" placeholder="è¯·è¾“å…¥å¸–å­å†…å®¹" required></textarea>
                </div>
                <div class="form-group">
                    <label for="post-tags">æ ‡ç­¾</label>
                    <input type="text" id="post-tags" placeholder="è¯·è¾“å…¥æ ‡ç­¾ï¼Œç”¨é€—å·åˆ†éš”ï¼Œæœ€å¤š5ä¸ª">
                    <div class="form-note">æ ‡ç­¾æœ‰åŠ©äºå…¶ä»–ç©å®¶æ›´å®¹æ˜“æ‰¾åˆ°æ‚¨çš„å†…å®¹</div>
                </div>
                <div class="form-group">
                    <label for="post-links">ç›¸å…³é“¾æ¥</label>
                    <input type="text" id="post-links" placeholder="è¯·è¾“å…¥ç›¸å…³é“¾æ¥ï¼ˆå¯é€‰ï¼‰">
                    <div class="form-note">å¯ä»¥æ·»åŠ æ¸¸æˆå®˜ç½‘ã€è§†é¢‘é“¾æ¥ã€æ”»ç•¥é“¾æ¥ç­‰</div>
                </div>
                <button type="submit" class="form-button">ğŸš€ å‘å¸ƒå†…å®¹</button>
                <button type="button" id="cancel-btn" class="form-button-secondary">â†©ï¸ å–æ¶ˆ</button>
            </form>
        </div>
    </div>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-info">
                    <h4>ğŸ¢ å…³äºæˆ‘ä»¬</h4>
                    <p>ğŸ® æ¸¸æˆç©å®¶å†…å®¹å‘å¸ƒå¹³å°ï¼Œè¿æ¥å…¨çƒæ¸¸æˆçˆ±å¥½è€…</p>
                </div>
                <div class="footer-links">
                    <h4>ğŸ”— å¿«é€Ÿé“¾æ¥</h4>
                    <a href="index.html">ğŸ  é¦–é¡µ</a>
                    <a href="#">ğŸ“ å¸–å­</a>
                    <a href="#">ğŸ“„ æ–‡ç« </a>
                    <a href="#">ğŸ“ è”ç³»æˆ‘ä»¬</a>
                </div>
                <div class="footer-social">
                    <h4>ğŸ‘€ å…³æ³¨æˆ‘ä»¬</h4>
                    <a href="#" class="social-link">ğŸ“± å¾®åš</a>
                    <a href="#" class="social-link">ğŸ’¬ å¾®ä¿¡</a>
                    <a href="#" class="social-link">ğŸ® Discord</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 æ¸¸æˆç©å®¶å†…å®¹å‘å¸ƒå¹³å°. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
            </div>
        </div>
    </footer>

    <script>
        // ç­‰å¾…DOMåŠ è½½å®Œæˆ
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                alert('è¯·å…ˆç™»å½•æ‰èƒ½å‘å¸ƒå¸–å­');
                window.location.href = 'login.html';
            } else {
                // æ›´æ–°å¯¼èˆªæ æ˜¾ç¤º
                updateNavDisplay();
            }

            // ä¸ºå¸–å­å’Œæ–‡ç« é“¾æ¥æ·»åŠ ç‚¹å‡»äº‹ä»¶
            document.getElementById('posts-link').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'posts.html';
            });
            
            document.getElementById('articles-link').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'articles.html';
            });

            // å–æ¶ˆæŒ‰é’®äº‹ä»¶
            document.getElementById('cancel-btn').addEventListener('click', function() {
                window.location.href = 'index.html';
            });

            // åˆå§‹åŒ–åˆ›å»ºå¸–å­è¡¨å•
            initCreatePostForm();
        });
    </script>
</body>
</html>